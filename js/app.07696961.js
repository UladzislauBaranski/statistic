(function(e){function t(t){for(var a,r,l=t[0],o=t[1],c=t[2],u=0,p=[];u<l.length;u++)r=l[u],n[r]&&p.push(n[r][0]),n[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,l=1;l<i.length;l++){var o=i[l];0!==n[o]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},n={app:0},s=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=o;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var a=i("1356"),n=i.n(a);n.a},1356:function(e,t,i){},2403:function(e,t,i){"use strict";var a=i("7de0"),n=i.n(a);n.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("Statistics")],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.database?i("md-tabs",[i("md-tab",{attrs:{id:"tab-base","md-label":"Основная статистика"}},[i("div",[i("v-data-table",{attrs:{headers:e.headers,items:e.playerStatisticsForDisplay,"disable-pagination":"","hide-default-footer":"","multi-sort":"","sort-by":["isRating","absolutePoints","games","name"],"sort-desc":[!0,!0,!0,!1]},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[i("tr",{class:{notRating:!a.isRating}},[i("td",[e._v(e._s(a.name))]),i("td",[e._v(e._s(a.games))]),i("td",[e._v(e._s(a.wins))]),i("td",[e._v(e._s(a.sherif))]),i("td",[e._v(e._s(a.sherifWins))]),i("td",[e._v(e._s(a.citizen))]),i("td",[e._v(e._s(a.don))]),i("td",[e._v(e._s(a.donWins))]),i("td",[e._v(e._s(a.maf))]),i("td",[e._v(e._s(a.mafWins))]),i("td",[e._v(e._s(a.firstKilled))]),i("td",[e._v(e._s(a.firstKilledGuessPoints))]),i("td",[e._v(e._s(a.absolutePoints))]),i("td",[e._v(e._s(a.relativePoints))])])]}}],null,!1,3383038018)})],1),i("div",{staticClass:"games-statistic games-statistic-all"},[e._v("Всего игр: "+e._s(e.gamesCount))]),i("div",{staticClass:"games-statistic games-statistic-red-wins"},[e._v("Побед мирных: "+e._s(e.redWinsCount))]),i("div",{staticClass:"games-statistic games-statistic-black-wins"},[e._v("Побед мафии: "+e._s(e.blackWinsCount))]),i("div",{staticClass:"games-statistic games-statistic-rating"},[e._v("Игр для попадания в рейтинг: "+e._s(e.gamesForRatingCount))])]),i("md-tab",{attrs:{id:"tab-roles","md-label":"По ролям"}},[i("RoleStatistic",{attrs:{playerStatisticsForDisplay:e.playerStatisticsForDisplayRating,players:e.ratingPlayers}})],1),i("md-tab",{attrs:{id:"tab-players","md-label":"По игрокам"}},[i("PlayerStatistic",{attrs:{playerStatisticsForDisplay:e.playerStatisticsForDisplayRating,players:e.ratingPlayers}})],1),i("md-tab",{attrs:{id:"tab-box","md-label":"По номерам"}},[i("BoxStatistic",{attrs:{playerStatisticsForDisplay:e.playerStatisticsForDisplayRating,players:e.ratingPlayers}})],1)],1):e._e()},l=[],o=(i("6c7b"),i("ac6a"),i("7514"),i("7f7f"),i("55dd"),i("a481"),i("28a5"),i("96cf"),i("3b8d")),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-data-table",{attrs:{headers:e.headers,items:e.items,options:e.options,"server-items-length":1,"disable-pagination":"","hide-default-footer":"","must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.sherif",fn:function(t){var a=t.item;return[e.displayChip(a,"sherif")?i("v-chip",{attrs:{color:e.getColor(a,"sherif")}},[e._v(e._s(a.sherifWins)+"/"+e._s(a.sherif)+"   "+e._s(a.sherifWinPercent)+"%")]):e._e(),e.displayChip(a,"sherif")?e._e():i("span",[e._v(e._s(a.sherifWins)+"/"+e._s(a.sherif)+"   "+e._s(a.sherifWinPercent)+"%")])]}},{key:"item.citizen",fn:function(t){var a=t.item;return[e.displayChip(a,"citizen")?i("v-chip",{attrs:{color:e.getColor(a,"citizen")}},[e._v(e._s(a.citizenWins)+"/"+e._s(a.citizen)+"   "+e._s(a.citizenWinPercent)+"%")]):e._e(),e.displayChip(a,"citizen")?e._e():i("span",[e._v(e._s(a.citizenWins)+"/"+e._s(a.citizen)+"   "+e._s(a.citizenWinPercent)+"%")])]}},{key:"item.don",fn:function(t){var a=t.item;return[e.displayChip(a,"don")?i("v-chip",{attrs:{color:e.getColor(a,"don")}},[e._v(e._s(a.donWins)+"/"+e._s(a.don)+"   "+e._s(a.donWinPercent)+"%")]):e._e(),e.displayChip(a,"don")?e._e():i("span",[e._v(e._s(a.donWins)+"/"+e._s(a.don)+"   "+e._s(a.donWinPercent)+"%")])]}},{key:"item.maf",fn:function(t){var a=t.item;return[e.displayChip(a,"maf")?i("v-chip",{attrs:{color:e.getColor(a,"maf")}},[e._v(e._s(a.mafWins)+"/"+e._s(a.maf)+"   "+e._s(a.mafWinPercent)+"%")]):e._e(),e.displayChip(a,"maf")?e._e():i("span",[e._v(e._s(a.mafWins)+"/"+e._s(a.maf)+"   "+e._s(a.mafWinPercent)+"%")])]}}])})},d=[],u=(i("6762"),i("2fdb"),{name:"RoleStatistic",props:{playerStatisticsForDisplay:Array,players:Array},data:function(){return{items:[],options:{},headers:[{text:"Игрок",value:"name"},{text:"Лучший шериф",value:"sherif"},{text:"Лучший мирный",value:"citizen"},{text:"Лучший дон",value:"don"},{text:"Лучший маф",value:"maf"}]}},watch:{options:{handler:function(){var e=this;this.getData().then(function(t){e.items=t.items})},deep:!0}},methods:{displayChip:function(e,t){var i=t+"WinPercent",a=this.getHighligting(e[i],e[t]);return"none"!=a},getColor:function(e,t){var i=t+"WinPercent";return this.getHighligting(e[i],e[t])},getHighligting:function(e,t){return 0==t?"none":100==e?"rgb(0, 255, 0)":e>60?"rgba(0, 255, 0, 0.5)":0==e?"rgb(255, 0, 0)":"none"},getData:function(){var e=this;return new Promise(function(t){var i=e.options,a=i.sortBy,n=i.sortDesc,s=e.playerStatisticsForDisplay.slice(0),r=s.length;if(1===a.length&&1===n.length||0==a.length){var l="name",o=!1;1==a.length&&(l=a[0],o=n[0]),s=s.sort(function(t,i){if(["sherif","citizen","don","maf"].includes(l))return e.percentSort(t,i,l,o);var a=t[l],n=i[l];return o?a<n?1:a>n?-1:0:a<n?-1:a>n?1:0})}t({items:s,total:r})})},percentSort:function(e,t,i,a){var n=i+"WinPercent";return e[n]>t[n]?a?-1:1:e[n]<t[n]?a?1:-1:e[i]>t[i]?a?-1:1:e[i]<t[i]?a?1:-1:0}}}),p=u,f=i("2877"),h=i("6544"),y=i.n(h),m=i("cc20"),b=i("8fea"),_=Object(f["a"])(p,c,d,!1,null,null,null),v=_.exports;y()(_,{VChip:m["a"],VDataTable:b["a"]});var g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.selectedPlayerId?i("div",{staticClass:"player-statistic"},[i("div",{staticClass:"select-player-container"},[i("div",{staticClass:"player-lable"},[e._v("Игрок:")]),i("div",{staticClass:"player-selector"},[i("model-list-select",{attrs:{list:e.players,"option-value":"id","option-text":"name",placeholder:"выберите игрока"},model:{value:e.selectedPlayerId,callback:function(t){e.selectedPlayerId=t},expression:"selectedPlayerId"}})],1)]),i("v-data-table",{attrs:{headers:e.headers,items:e.items,options:e.options,"server-items-length":1,"disable-pagination":"","hide-default-footer":"","must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.bothRed",fn:function(t){var a=t.item;return[e.displayChip(a,"bothRed")?i("v-chip",{attrs:{color:e.getColor(a,"bothRed")}},[e._v(e._s(a.bothRedWins)+"/"+e._s(a.bothRed)+"   "+e._s(a.bothRedWinPercent)+"%")]):e._e(),e.displayChip(a,"bothRed")?e._e():i("span",[e._v(e._s(a.bothRedWins)+"/"+e._s(a.bothRed)+"   "+e._s(a.bothRedWinPercent)+"%")])]}},{key:"item.bothBlack",fn:function(t){var a=t.item;return[e.displayChip(a,"bothBlack")?i("v-chip",{attrs:{color:e.getColor(a,"bothBlack")}},[e._v(e._s(a.bothBlackWins)+"/"+e._s(a.bothBlack)+"   "+e._s(a.bothBlackWinPercent)+"%")]):e._e(),e.displayChip(a,"bothBlack")?e._e():i("span",[e._v(e._s(a.bothBlackWins)+"/"+e._s(a.bothBlack)+"   "+e._s(a.bothBlackWinPercent)+"%")])]}},{key:"item.playerRed",fn:function(t){var a=t.item;return[e.displayChip(a,"playerRed")?i("v-chip",{attrs:{color:e.getColor(a,"playerRed")}},[e._v(e._s(a.playerRedWins)+"/"+e._s(a.playerRed)+"   "+e._s(a.playerRedWinPercent)+"%")]):e._e(),e.displayChip(a,"playerRed")?e._e():i("span",[e._v(e._s(a.playerRedWins)+"/"+e._s(a.playerRed)+"   "+e._s(a.playerRedWinPercent)+"%")])]}},{key:"item.playerBlack",fn:function(t){var a=t.item;return[e.displayChip(a,"playerBlack")?i("v-chip",{attrs:{color:e.getColor(a,"playerBlack")}},[e._v(e._s(a.playerBlackWins)+"/"+e._s(a.playerBlack)+"   "+e._s(a.playerBlackWinPercent)+"%")]):e._e(),e.displayChip(a,"playerBlack")?e._e():i("span",[e._v(e._s(a.playerBlackWins)+"/"+e._s(a.playerBlack)+"   "+e._s(a.playerBlackWinPercent)+"%")])]}}],null,!1,3098048137)})],1):e._e()},W=[],x=i("0393"),P={name:"PlayerStatistic",props:{playerStatisticsForDisplay:Array,players:Array},components:{ModelListSelect:x["ModelListSelect"]},data:function(){return{currentSort:"name",currentSortOrder:"asc",selectedPlayerId:null,selectedPlayerName:"",statisticWithOtherPlayers:null,items:[],options:{},headers:[{text:"Игрок",value:"name"},{text:"Вместе красные",value:"bothRed"},{text:"Вместе чёрные",value:"bothBlack"},{text:"Разноцвет(игрок красный)",value:"playerRed"},{text:"Разноцвет(игрок чёрный)",value:"playerBlack"}]}},mounted:function(){this.selectedPlayerId=this.players[0].id},watch:{selectedPlayerId:function(e){this.selectedPlayerName=this.getPlayerName(e),this.statisticWithOtherPlayers=this.playerStatisticsForDisplay.find(function(t){return t.id===e}).withOtherPlayers,this.updateTable()},options:{handler:function(){this.updateTable()},deep:!0}},methods:{displayChip:function(e,t){var i=t+"WinPercent",a=this.getHighligting(e[i],e[t]);return"none"!=a},getColor:function(e,t){var i=t+"WinPercent";return this.getHighligting(e[i],e[t])},getHighligting:function(e,t){return 0==t?"none":100==e?"rgb(0, 255, 0)":e>60?"rgba(0, 255, 0, 0.5)":0==e?"rgb(255, 0, 0)":"none"},updateTable:function(){var e=this;this.getData().then(function(t){e.items=t.items})},getData:function(){var e=this;return new Promise(function(t){var i=e.options,a=i.sortBy,n=i.sortDesc,s=e.statisticWithOtherPlayers.slice(0),r=s.length;if(void 0==a||1===a.length&&1===n.length||0===a.length){var l="name",o=!1;void 0!=a&&1==a.length&&(l=a[0],o=n[0]),s=s.sort(function(t,i){if(["bothRed","bothBlack","playerRed","playerBlack"].includes(l))return e.percentSort(t,i,l,o);var a=t[l],n=i[l];return o?a<n?1:a>n?-1:0:a<n?-1:a>n?1:0})}t({items:s,total:r})})},percentSort:function(e,t,i,a){var n=i+"WinPercent";return e[n]>t[n]?a?-1:1:e[n]<t[n]?a?1:-1:e[i]>t[i]?a?-1:1:e[i]<t[i]?a?1:-1:0},getPlayerName:function(e){return this.players.find(function(t){return t.id===e}).name}}},C=P,k=(i("2403"),Object(f["a"])(C,g,W,!1,null,null,null)),S=k.exports;y()(k,{VChip:m["a"],VDataTable:b["a"]});var I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-data-table",{attrs:{headers:e.headers,items:e.playerStatisticsForDisplay,"disable-pagination":"","hide-default-footer":"","must-sort":"","sort-by":"name"},scopedSlots:e._u([{key:"item.box0",fn:function(t){var a=t.item;return[e.displayChip(a,0)?i("v-chip",{attrs:{color:e.getColor(a,0)}},[e._v(e._s(a.boxWins[0])+"/"+e._s(a.box[0]))]):e._e(),e.displayChip(a,0)?e._e():i("span",[e._v(e._s(a.boxWins[0])+"/"+e._s(a.box[0]))])]}},{key:"item.box1",fn:function(t){var a=t.item;return[e.displayChip(a,1)?i("v-chip",{attrs:{color:e.getColor(a,1)}},[e._v(e._s(a.boxWins[1])+"/"+e._s(a.box[1]))]):e._e(),e.displayChip(a,1)?e._e():i("span",[e._v(e._s(a.boxWins[1])+"/"+e._s(a.box[1]))])]}},{key:"item.box2",fn:function(t){var a=t.item;return[e.displayChip(a,2)?i("v-chip",{attrs:{color:e.getColor(a,2)}},[e._v(e._s(a.boxWins[2])+"/"+e._s(a.box[2]))]):e._e(),e.displayChip(a,2)?e._e():i("span",[e._v(e._s(a.boxWins[2])+"/"+e._s(a.box[2]))])]}},{key:"item.box3",fn:function(t){var a=t.item;return[e.displayChip(a,3)?i("v-chip",{attrs:{color:e.getColor(a,3)}},[e._v(e._s(a.boxWins[3])+"/"+e._s(a.box[3]))]):e._e(),e.displayChip(a,3)?e._e():i("span",[e._v(e._s(a.boxWins[3])+"/"+e._s(a.box[3]))])]}},{key:"item.box4",fn:function(t){var a=t.item;return[e.displayChip(a,4)?i("v-chip",{attrs:{color:e.getColor(a,4)}},[e._v(e._s(a.boxWins[4])+"/"+e._s(a.box[4]))]):e._e(),e.displayChip(a,4)?e._e():i("span",[e._v(e._s(a.boxWins[4])+"/"+e._s(a.box[4]))])]}},{key:"item.box5",fn:function(t){var a=t.item;return[e.displayChip(a,5)?i("v-chip",{attrs:{color:e.getColor(a,5)}},[e._v(e._s(a.boxWins[5])+"/"+e._s(a.box[5]))]):e._e(),e.displayChip(a,5)?e._e():i("span",[e._v(e._s(a.boxWins[5])+"/"+e._s(a.box[5]))])]}},{key:"item.box6",fn:function(t){var a=t.item;return[e.displayChip(a,6)?i("v-chip",{attrs:{color:e.getColor(a,6)}},[e._v(e._s(a.boxWins[6])+"/"+e._s(a.box[6]))]):e._e(),e.displayChip(a,6)?e._e():i("span",[e._v(e._s(a.boxWins[6])+"/"+e._s(a.box[6]))])]}},{key:"item.box7",fn:function(t){var a=t.item;return[e.displayChip(a,7)?i("v-chip",{attrs:{color:e.getColor(a,7)}},[e._v(e._s(a.boxWins[7])+"/"+e._s(a.box[7]))]):e._e(),e.displayChip(a,7)?e._e():i("span",[e._v(e._s(a.boxWins[7])+"/"+e._s(a.box[7]))])]}},{key:"item.box8",fn:function(t){var a=t.item;return[e.displayChip(a,8)?i("v-chip",{attrs:{color:e.getColor(a,8)}},[e._v(e._s(a.boxWins[8])+"/"+e._s(a.box[8]))]):e._e(),e.displayChip(a,8)?e._e():i("span",[e._v(e._s(a.boxWins[8])+"/"+e._s(a.box[8]))])]}},{key:"item.box9",fn:function(t){var a=t.item;return[e.displayChip(a,9)?i("v-chip",{attrs:{color:e.getColor(a,9)}},[e._v(e._s(a.boxWins[9])+"/"+e._s(a.box[9]))]):e._e(),e.displayChip(a,9)?e._e():i("span",[e._v(e._s(a.boxWins[9])+"/"+e._s(a.box[9]))])]}}])})},R=[],B={name:"BoxStatistic",props:{playerStatisticsForDisplay:Array,players:Array},data:function(){return{items:[],options:{},headers:[{text:"Игрок",value:"name"},{text:"1 номер",value:"box0",sortable:!1},{text:"2 номер",value:"box1",sortable:!1},{text:"3 номер",value:"box2",sortable:!1},{text:"4 номер",value:"box3",sortable:!1},{text:"5 номер",value:"box4",sortable:!1},{text:"6 номер",value:"box5",sortable:!1},{text:"7 номер",value:"box6",sortable:!1},{text:"8 номер",value:"box7",sortable:!1},{text:"9 номер",value:"box8",sortable:!1},{text:"10 номер",value:"box9",sortable:!1}]}},methods:{displayChip:function(e,t){var i=this.getHighligting(e,t);return"none"!=i},getColor:function(e,t){return this.getHighligting(e,t)},getHighligting:function(e,t){return 0==e.box[t]?"none":e.boxWins[t]==e.box[t]?"rgb(0, 255, 0)":100*e.boxWins[t]/e.box[t]>60?"rgba(0, 255, 0, 0.5)":0==e.boxWins[t]?"rgb(255, 0, 0)":"none"}}},K=B,O=Object(f["a"])(K,I,R,!1,null,null,null),D=O.exports;y()(O,{VChip:m["a"],VDataTable:b["a"]});var w=i("767f"),H={name:"Statistics",components:{RoleStatistic:v,PlayerStatistic:S,BoxStatistic:D},props:{},data:function(){return{gamesCount:0,redWinsCount:0,blackWinsCount:0,gamesForRatingCount:0,ratingThreshold:.15,currentSort:"name",currentSortOrder:"asc",database:null,players:null,ratingPlayers:null,games:null,playerStatistics:{},playerStatisticsForDisplay:[],playerStatisticsForDisplayRating:[],headers:[{text:"Игрок",value:"name",sortable:!1},{text:"Игр",value:"games",sortable:!1},{text:"Побед",value:"wins",sortable:!1},{text:"Игр шерифом",value:"sherif",sortable:!1},{text:"Побед шерифом",value:"sherifWins",sortable:!1},{text:"Игр мирным",value:"citizen",sortable:!1},{text:"Игр доном",value:"don",sortable:!1},{text:"Побед доном",value:"donWins",sortable:!1},{text:"Игр мафом",value:"maf",sortable:!1},{text:"Побед мафом",value:"mafWins",sortable:!1},{text:"Первый убитый",value:"firstKilled",sortable:!1},{text:"Лучший ход",value:"firstKilledGuessPoints",sortable:!1},{text:"Баллы",value:"absolutePoints",sortable:!1},{text:"Очки",value:"relativePoints",sortable:!1}]}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,a,n,s,r,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:0,t=(new Date).toISOString().substr(0,7).split("-"),i=t[0],a=t[1];case 4:return n=("0"+a).slice(-2),s="https://mafia-patron.github.io/statistic/{month}-games.json".replace("{month}",i+"-"+n),e.next=8,fetch(s);case 8:if(r=e.sent,!r.ok){e.next=18;break}return e.next=12,r.json();case 12:return l=e.sent,this.database=l,this.players=l.players,this.games=l.games,this.calculateStatistic(),e.abrupt("break",22);case 18:a--,0==a&&(a=12,i--,2018==i&&alert("Игры не найдены"));case 20:e.next=4;break;case 22:e.next=28;break;case 24:this.database=w,this.players=w.players,this.games=w.games,this.calculateStatistic();case 28:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{customSort:function(e){var t=this;return e.sort(function(e,i){var a=t.currentSort;return"desc"===t.currentSortOrder?e[a]>i[a]?-1:e[a]<i[a]?1:0:e[a]>i[a]?1:e[a]<i[a]?-1:0})},getPlayerName:function(e){return this.players.find(function(t){return t.id===e}).name},calculateStatistic:function(){var e=this;this.games.forEach(function(t){var i=[];t.players.forEach(function(t){i.push(e.getPlayerStatisticById(t))});for(var a=0;a<10;a++){var n=i[a];n.games++,n.box[a]++,e.playerWinGame(t,a)&&(n.wins++,n.boxWins[a]++),e.playerIsSherif(t,a)&&n.sherif++,e.playerIsSherifAndWin(t,a)&&n.sherifWins++,e.playerIsCitizen(t,a)&&n.citizen++,e.playerIsCitizenAndWin(t,a)&&n.citizenWins++,e.playerIsDon(t,a)&&n.don++,e.playerIsDonAndWin(t,a)&&n.donWins++,e.playerIsMaf(t,a)&&n.maf++,e.playerIsMafAndWin(t,a)&&n.mafWins++,e.firstKilled(t,a)&&(n.firstKilled++,n.firstKilledGuessPoints+=t.firstKilledGuessPoints);for(var s=0;s<10;s++)if(a!==s){var r=e.getStatisticWithOtherPlayerById(n,t.players[s]);r.gamesTogether++,e.playerIsRed(t,a)&&e.playerIsRed(t,s)&&(r.bothRed++,t.cityWin&&r.bothRedWins++),e.playerIsBlack(t,a)&&e.playerIsBlack(t,s)&&(r.bothBlack++,t.cityWin||r.bothBlackWins++),e.playerIsRed(t,a)&&e.playerIsBlack(t,s)&&(r.playerRed++,t.cityWin&&r.playerRedWins++),e.playerIsBlack(t,a)&&e.playerIsRed(t,s)&&(r.playerBlack++,t.cityWin||r.playerBlackWins++)}}}),this.gamesForRatingCount=Math.ceil(this.games.length*this.ratingThreshold),this.ratingPlayers=[],this.players.forEach(function(t){var i=e.getPlayerStatisticById(t.id);i.isRating=i.games>=e.gamesForRatingCount,e.calculatePoints(i),i.sherifWinPercent=e.calculatePercent(i.sherifWins,i.sherif),i.citizenWinPercent=e.calculatePercent(i.citizenWins,i.citizen),i.donWinPercent=e.calculatePercent(i.donWins,i.don),i.mafWinPercent=e.calculatePercent(i.mafWins,i.maf),e.playerStatisticsForDisplay.push(i),i.isRating&&(e.ratingPlayers.push(t),e.playerStatisticsForDisplayRating.push(i))}),this.players.forEach(function(t){var i=e.getPlayerStatisticById(t.id);i.withOtherPlayers=e.calculateStatisticWithOtherPlayers(i)}),this.ratingPlayers.sort(this.sortByNameFunction),this.gamesCount=this.games.length,this.redWinsCount=this.games.filter(function(e){return e.cityWin}).length,this.blackWinsCount=this.games.filter(function(e){return!e.cityWin}).length},calculateStatisticWithOtherPlayers:function(e){var t=[],i=this;return this.players.forEach(function(a){if(a.id!=e.id){var n=e.withOtherPlayers[a.id];if(n){var s=i.getPlayerStatisticById(a.id);s.isRating&&(n.bothRedWinPercent=i.calculatePercent(n.bothRedWins,n.bothRed),n.bothBlackWinPercent=i.calculatePercent(n.bothBlackWins,n.bothBlack),n.playerRedWinPercent=i.calculatePercent(n.playerRedWins,n.playerRed),n.playerBlackWinPercent=i.calculatePercent(n.playerBlackWins,n.playerBlack),t.push(n))}}}),t},getPlayerStatisticById:function(e){var t=this.playerStatistics[e];return t||(t={id:e,name:this.getPlayerName(e),games:0,wins:0,sherif:0,sherifWins:0,sherifWinPercent:0,citizen:0,citizenWins:0,citizenWinPercent:0,don:0,donWins:0,donWinPercent:0,maf:0,mafWins:0,mafWinPercent:0,firstKilled:0,firstKilledGuessPoints:0,absolutePoints:0,relativePoints:0,box:Array(10).fill(0),boxWins:Array(10).fill(0),isRating:!1,withOtherPlayers:{}},this.playerStatistics[e]=t),t},getStatisticWithOtherPlayerById:function(e,t){var i=e.withOtherPlayers[t];return i||(i={id:t,name:this.getPlayerName(t),gamesTogether:0,bothRed:0,bothRedWins:0,bothRedWinPercent:0,bothBlack:0,bothBlackWins:0,bothBlackWinPercent:0,playerRed:0,playerRedWins:0,playerRedWinPercent:0,playerBlack:0,playerBlackWins:0,playerBlackWinPercent:0},e.withOtherPlayers[t]=i),i},playerWinGame:function(e,t){return e.don==t||e.maf1==t||e.maf2==t?!e.cityWin:e.cityWin},playerIsSherif:function(e,t){return e.sherif==t},playerIsSherifAndWin:function(e,t){return e.cityWin&&this.playerIsSherif(e,t)},playerIsCitizen:function(e,t){return!(e.don==t||e.maf1==t||e.maf2==t||e.sherif==t)},playerIsCitizenAndWin:function(e,t){return e.cityWin&&this.playerIsCitizen(e,t)},playerIsDon:function(e,t){return e.don==t},playerIsDonAndWin:function(e,t){return!e.cityWin&&this.playerIsDon(e,t)},playerIsMaf:function(e,t){return e.maf1==t||e.maf2==t},playerIsMafAndWin:function(e,t){return!e.cityWin&&this.playerIsMaf(e,t)},firstKilled:function(e,t){return e.firstKilled==t},calculatePoints:function(e){e.absolutePoints=e.wins+e.firstKilledGuessPoints,e.relativePoints=Math.round(100*e.absolutePoints/e.games)},playerIsBlack:function(e,t){return e.don==t||e.maf1==t||e.maf2==t},playerIsRed:function(e,t){return!this.playerIsBlack(e,t)},calculatePercent:function(e,t){return 0==t?0:Math.round(1e3*e/t)/10},sortByNameFunction:function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}}},z=H,F=(i("d823"),Object(f["a"])(z,r,l,!1,null,null,null)),G=F.exports;y()(F,{VDataTable:b["a"]});var j={name:"app",components:{Statistics:G}},A=j,T=(i("034f"),Object(f["a"])(A,n,s,!1,null,null,null)),M=T.exports,E=i("43f9"),V=i.n(E),N=(i("51de"),i("e094"),i("f309"));a["default"].use(N["a"]);var $=new N["a"]({icons:{iconfont:"mdi"}});a["default"].use(V.a),a["default"].config.productionTip=!1,new a["default"]({vuetify:$,render:function(e){return e(M)}}).$mount("#app")},"767f":function(e){e.exports={formatVersion:1,settings:{gamesMonth:"2019-08",maxPlayerId:20,maxGameId:4},games:[{id:1,date:"2019-08-01",players:[1,2,3,4,5,6,7,8,9,10],don:7,maf1:0,maf2:5,sherif:8,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:2,date:"2019-08-02",players:[6,7,11,5,12,13,14,15,16,17],don:0,maf1:6,maf2:7,sherif:2,firstKilled:8,firstKilledGuessPoints:0,cityWin:!0},{id:3,date:"2019-08-03",players:[7,8,5,19,18,12,2,9,4,1],don:9,maf1:8,maf2:3,sherif:7,firstKilled:0,firstKilledGuessPoints:.25,cityWin:!1},{id:4,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:5,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:6,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:7,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:8,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:9,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:10,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1},{id:11,date:"2019-08-04",players:[19,7,1,12,18,9,20,13,4,5],don:3,maf1:0,maf2:4,sherif:1,firstKilled:2,firstKilledGuessPoints:0,cityWin:!1}],players:[{id:1,name:"Бернинг",nameHistory:[{nameChangeId:1,name:"Бернинг",date:1565800124544}]},{id:2,name:"Эми",nameHistory:[{nameChangeId:1,name:"Эми",date:1565800132685}]},{id:3,name:"Алиса (блондинка)",nameHistory:[{nameChangeId:1,name:"Алиса (блондинка)",date:1565800167452}]},{id:4,name:"Тургенев",nameHistory:[{nameChangeId:1,name:"Тургенев",date:1565800220573}]},{id:5,name:"SOVEST",nameHistory:[{nameChangeId:1,name:"SOVEST",date:1565800234216}]},{id:6,name:"Масяня",nameHistory:[{nameChangeId:1,name:"Масяня",date:1565800246415}]},{id:7,name:"Лёлик",nameHistory:[{nameChangeId:1,name:"Лёлик",date:1565800263835}]},{id:8,name:"Клон",nameHistory:[{nameChangeId:1,name:"Клон",date:1565800277351}]},{id:9,name:"Созерцающий",nameHistory:[{nameChangeId:1,name:"Созерцающий",date:1565800287637}]},{id:10,name:"Дутче",nameHistory:[{nameChangeId:1,name:"Дутче",date:1565800296750}]},{id:11,name:"Антоновка",nameHistory:[{nameChangeId:1,name:"Антоновка",date:1565800788493}]},{id:12,name:"Bottcelli",nameHistory:[{nameChangeId:1,name:"Bottcelli",date:1565800816894}]},{id:13,name:"Медведь",nameHistory:[{nameChangeId:1,name:"Медведь",date:1565800850521}]},{id:14,name:"Сантос",nameHistory:[{nameChangeId:1,name:"Сантос",date:1565800869034}]},{id:15,name:"Вильгельм",nameHistory:[{nameChangeId:1,name:"Вильгельм",date:1565800888773}]},{id:16,name:"Мастер",nameHistory:[{nameChangeId:1,name:"Мастер",date:1565800898960}]},{id:17,name:"Кот",nameHistory:[{nameChangeId:1,name:"Кот",date:1565800906540}]},{id:18,name:"Тетчер",nameHistory:[{nameChangeId:1,name:"Пила",date:1565801287035},{nameChangeId:2,name:"Тетчер",date:1565801295607}]},{id:19,name:"Нео",nameHistory:[{nameChangeId:1,name:"Пила",date:1565801572931},{nameChangeId:2,name:"Нео",date:1565801701045}]},{id:20,name:"Пила",nameHistory:[{nameChangeId:1,name:"Пила",date:1565801817647}]}]}},"7de0":function(e,t,i){},d823:function(e,t,i){"use strict";var a=i("f949"),n=i.n(a);n.a},f949:function(e,t,i){}});
//# sourceMappingURL=app.07696961.js.map