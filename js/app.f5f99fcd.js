(function(t){function e(e){for(var a,l,i=e[0],c=e[1],o=e[2],u=0,m=[];u<i.length;u++)l=i[u],n[l]&&m.push(n[l][0]),n[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,o||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=l(l.s=r[0]))}return t}var a={},n={app:0},s=[];function l(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=t,l.c=a,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(r,a,function(e){return t[e]}.bind(null,a));return r},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var o=0;o<i.length;o++)e(i[o]);var d=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("64a9"),n=r.n(a);n.a},2403:function(t,e,r){"use strict";var a=r("bda8"),n=r.n(a);n.a},"2dd6":function(t,e,r){},"370e":function(t,e,r){"use strict";var a=r("c552"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Statistics")],1)},s=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.database?r("md-tabs",[r("md-tab",{attrs:{id:"tab-base","md-label":"Основная статистика"}},[r("div",[r("md-table",{staticClass:"statistics-table",attrs:{"md-card":"","md-fixed-header":"","md-sort":t.currentSort,"md-sort-order":t.currentSortOrder,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){t.currentSort=e},"update:md-sort":function(e){t.currentSort=e},"update:mdSortOrder":function(e){t.currentSortOrder=e},"update:md-sort-order":function(e){t.currentSortOrder=e}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var a=e.item;return r("md-table-row",{attrs:{"md-selectable":"single"}},[r("md-table-cell",{attrs:{"md-label":"Игрок","md-sort-by":"name"}},[t._v(t._s(a.name))]),r("md-table-cell",{attrs:{"md-label":"Игр","md-sort-by":"games","md-numeric":""}},[t._v(t._s(a.games))]),r("md-table-cell",{attrs:{"md-label":"Побед","md-sort-by":"wins","md-numeric":""}},[t._v(t._s(a.wins))]),r("md-table-cell",{attrs:{"md-label":"Игр шерифом","md-sort-by":"sherif","md-numeric":""}},[t._v(t._s(a.sherif))]),r("md-table-cell",{attrs:{"md-label":"Побед шерифом","md-sort-by":"sherifWins","md-numeric":""}},[t._v(t._s(a.sherifWins))]),r("md-table-cell",{attrs:{"md-label":"Игр мирным","md-sort-by":"citizen","md-numeric":""}},[t._v(t._s(a.citizen))]),r("md-table-cell",{attrs:{"md-label":"Побед мирным","md-sort-by":"citizenWins","md-numeric":""}},[t._v(t._s(a.citizenWins))]),r("md-table-cell",{attrs:{"md-label":"Игр доном","md-sort-by":"don","md-numeric":""}},[t._v(t._s(a.don))]),r("md-table-cell",{attrs:{"md-label":"Побед доном","md-sort-by":"donWins","md-numeric":""}},[t._v(t._s(a.donWins))]),r("md-table-cell",{attrs:{"md-label":"Игр мафом","md-sort-by":"maf","md-numeric":""}},[t._v(t._s(a.maf))]),r("md-table-cell",{attrs:{"md-label":"Побед мафом","md-sort-by":"mafWins","md-numeric":""}},[t._v(t._s(a.mafWins))])],1)}}],null,!1,3894899979),model:{value:t.playerStatisticsForDisplay,callback:function(e){t.playerStatisticsForDisplay=e},expression:"playerStatisticsForDisplay"}})],1)]),r("md-tab",{attrs:{id:"tab-roles","md-label":"По ролям"}},[r("RoleStatistic",{attrs:{playerStatisticsForDisplay:t.playerStatisticsForDisplay,players:t.players}})],1),r("md-tab",{attrs:{id:"tab-players","md-label":"По игрокам"}},[r("PlayerStatistic",{attrs:{playerStatisticsForDisplay:t.playerStatisticsForDisplay,players:t.players}})],1),r("md-tab",{attrs:{id:"tab-box","md-label":"По номерам"}},[r("BoxStatistic",{attrs:{playerStatisticsForDisplay:t.playerStatisticsForDisplay,players:t.players}})],1)],1):t._e()},i=[],c=(r("6c7b"),r("ac6a"),r("7514"),r("7f7f"),r("55dd"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("md-table",{staticClass:"role-table",attrs:{"md-card":"","md-fixed-header":"","md-sort":t.currentSort,"md-sort-order":t.currentSortOrder,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){t.currentSort=e},"update:md-sort":function(e){t.currentSort=e},"update:mdSortOrder":function(e){t.currentSortOrder=e},"update:md-sort-order":function(e){t.currentSortOrder=e}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var a=e.item;return r("md-table-row",{attrs:{"md-selectable":"single"}},[r("md-table-cell",{attrs:{"md-label":"Игрок","md-sort-by":"name"}},[t._v(t._s(a.name))]),r("md-table-cell",{attrs:{"md-label":"Лучший шериф","md-sort-by":"sherif","md-numeric":""}},[t._v(t._s(a.sherifWins)+"/"+t._s(a.sherif)+"   "+t._s(a.sherifWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Лучший мирный","md-sort-by":"citizen","md-numeric":""}},[t._v(t._s(a.citizenWins)+"/"+t._s(a.citizen)+"   "+t._s(a.citizenWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Лучший дон","md-sort-by":"don","md-numeric":""}},[t._v(t._s(a.donWins)+"/"+t._s(a.don)+"   "+t._s(a.donWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Лучший маф","md-sort-by":"maf","md-numeric":""}},[t._v(t._s(a.mafWins)+"/"+t._s(a.maf)+"   "+t._s(a.mafWinPercent)+"%")])],1)}}]),model:{value:t.playerStatisticsForDisplay,callback:function(e){t.playerStatisticsForDisplay=e},expression:"playerStatisticsForDisplay"}})}),o=[],d=(r("6762"),r("2fdb"),{name:"RoleStatistic",props:{playerStatisticsForDisplay:Array,players:Array},data:function(){return{currentSort:"name",currentSortOrder:"asc"}},methods:{customSort:function(t){var e=this;return t.sort(function(t,r){var a=e.currentSort,n="desc"===e.currentSortOrder;return["sherif","citizen","don","maf"].includes(a)?e.percentSort(t,r,a,n):n?t[a]>r[a]?-1:t[a]<r[a]?1:0:t[a]>r[a]?1:t[a]<r[a]?-1:0})},percentSort:function(t,e,r,a){var n=r+"WinPercent";return t[n]>e[n]?a?-1:1:t[n]<e[n]?a?1:-1:t[r]>e[r]?a?-1:1:t[r]<e[r]?a?1:-1:0}}}),u=d,m=(r("a335"),r("2877")),y=Object(m["a"])(u,c,o,!1,null,null,null),p=y.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.selectedPlayerId?r("div",{staticClass:"player-statistic"},[r("div",{staticClass:"select-player-container"},[r("div",{staticClass:"player-lable"},[t._v("Игрок:")]),r("div",{staticClass:"player-selector"},[r("model-list-select",{attrs:{list:t.players,"option-value":"id","option-text":"name",placeholder:"выберите игрока"},model:{value:t.selectedPlayerId,callback:function(e){t.selectedPlayerId=e},expression:"selectedPlayerId"}})],1)]),r("md-table",{staticClass:"player-table",attrs:{"md-card":"","md-fixed-header":"","md-sort":t.currentSort,"md-sort-order":t.currentSortOrder,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){t.currentSort=e},"update:md-sort":function(e){t.currentSort=e},"update:mdSortOrder":function(e){t.currentSortOrder=e},"update:md-sort-order":function(e){t.currentSortOrder=e}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var a=e.item;return r("md-table-row",{attrs:{"md-selectable":"single"}},[r("md-table-cell",{attrs:{"md-label":"Игрок","md-sort-by":"name"}},[t._v(t._s(a.name))]),r("md-table-cell",{attrs:{"md-label":"Игр вместе","md-sort-by":"gamesTogether","md-numeric":""}},[t._v(t._s(a.gamesTogether))]),r("md-table-cell",{attrs:{"md-label":"Вместе красные","md-sort-by":"bothRed","md-numeric":""}},[t._v(t._s(a.bothRedWins)+"/"+t._s(a.bothRed)+"   "+t._s(a.bothRedWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Вместе чёрные","md-sort-by":"bothBlack","md-numeric":""}},[t._v(t._s(a.bothBlackWins)+"/"+t._s(a.bothBlack)+"   "+t._s(a.bothBlackWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Разноцвет(игрок красный)","md-sort-by":"playerRed","md-numeric":""}},[t._v(t._s(a.playerRedWins)+"/"+t._s(a.playerRed)+"   "+t._s(a.playerRedWinPercent)+"%")]),r("md-table-cell",{attrs:{"md-label":"Разноцвет(игрок чёрный)","md-sort-by":"playerBlack","md-numeric":""}},[t._v(t._s(a.playerBlack)+"/"+t._s(a.playerBlack)+"   "+t._s(a.playerBlackWinPercent)+"%")])],1)}}],null,!1,444772041),model:{value:t.statisticWithOtherPlayers,callback:function(e){t.statisticWithOtherPlayers=e},expression:"statisticWithOtherPlayers"}})],1):t._e()},f=[],h=r("0393"),_={name:"PlayerStatistic",props:{playerStatisticsForDisplay:Array,players:Array},components:{ModelListSelect:h["ModelListSelect"]},data:function(){return{currentSort:"name",currentSortOrder:"asc",selectedPlayerId:null,selectedPlayerName:"",statisticWithOtherPlayers:null}},mounted:function(){this.selectedPlayerId=1},watch:{selectedPlayerId:function(t){this.selectedPlayerName=this.getPlayerName(t),this.statisticWithOtherPlayers=this.playerStatisticsForDisplay.find(function(e){return e.id===t}).withOtherPlayers}},methods:{customSort:function(t){var e=this;return t.sort(function(t,r){var a=e.currentSort,n="desc"===e.currentSortOrder;return["bothRed","bothBlack","playerRed","playerBlack"].includes(a)?e.percentSort(t,r,a,n):n?t[a]>r[a]?-1:t[a]<r[a]?1:0:t[a]>r[a]?1:t[a]<r[a]?-1:0})},percentSort:function(t,e,r,a){var n=r+"WinPercent";return t[n]>e[n]?a?-1:1:t[n]<e[n]?a?1:-1:t[r]>e[r]?a?-1:1:t[r]<e[r]?a?1:-1:0},getPlayerName:function(t){return this.players.find(function(e){return e.id===t}).name}}},S=_,W=(r("2403"),Object(m["a"])(S,b,f,!1,null,null,null)),v=W.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.mounted?r("div",[r("md-table",{staticClass:"box-table",attrs:{"md-card":"","md-fixed-header":"","md-sort":"name","md-sort-order":"asc"},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var a=e.item;return r("md-table-row",{attrs:{"md-selectable":"single"}},[r("md-table-cell",{attrs:{"md-label":"Игрок","md-sort-by":"name"}},[t._v(t._s(a.name))]),r("md-table-cell",{attrs:{"md-label":"1 номер"}},[t._v(t._s(a.boxWins[0])+"/"+t._s(a.box[0]))]),r("md-table-cell",{attrs:{"md-label":"2 номер"}},[t._v(t._s(a.boxWins[1])+"/"+t._s(a.box[1]))]),r("md-table-cell",{attrs:{"md-label":"3 номер"}},[t._v(t._s(a.boxWins[2])+"/"+t._s(a.box[2]))]),r("md-table-cell",{attrs:{"md-label":"4 номер"}},[t._v(t._s(a.boxWins[3])+"/"+t._s(a.box[3]))]),r("md-table-cell",{attrs:{"md-label":"5 номер"}},[t._v(t._s(a.boxWins[4])+"/"+t._s(a.box[4]))]),r("md-table-cell",{attrs:{"md-label":"6 номер"}},[t._v(t._s(a.boxWins[5])+"/"+t._s(a.box[5]))]),r("md-table-cell",{attrs:{"md-label":"7 номер"}},[t._v(t._s(a.boxWins[6])+"/"+t._s(a.box[6]))]),r("md-table-cell",{attrs:{"md-label":"8 номер"}},[t._v(t._s(a.boxWins[7])+"/"+t._s(a.box[7]))]),r("md-table-cell",{attrs:{"md-label":"9 номер"}},[t._v(t._s(a.boxWins[8])+"/"+t._s(a.box[8]))]),r("md-table-cell",{attrs:{"md-label":"10 номер"}},[t._v(t._s(a.boxWins[9])+"/"+t._s(a.box[9]))])],1)}}],null,!1,2354426817),model:{value:t.playerStatisticsForDisplay,callback:function(e){t.playerStatisticsForDisplay=e},expression:"playerStatisticsForDisplay"}})],1):t._e()},x=[],O={name:"BoxStatistic",props:{playerStatisticsForDisplay:Array,players:Array},data:function(){return{mounted:null}},mounted:function(){this.mounted=!0}},g=O,k=(r("370e"),Object(m["a"])(g,P,x,!1,null,null,null)),I=k.exports,B={name:"Statistics",components:{RoleStatistic:p,PlayerStatistic:v,BoxStatistic:I},props:{},data:function(){return{currentSort:"name",currentSortOrder:"asc",database:null,players:null,games:null,playerStatistics:{},playerStatisticsForDisplay:[]}},mounted:function(){var t=this;fetch("https://mafia-patron.github.io/statistic/games.json").then(function(t){return t.json()}).then(function(e){t.database=e,t.players=e.players,t.games=e.games,t.calculateStatistic()})},methods:{customSort:function(t){var e=this;return t.sort(function(t,r){var a=e.currentSort;return"desc"===e.currentSortOrder?t[a]>r[a]?-1:t[a]<r[a]?1:0:t[a]>r[a]?1:t[a]<r[a]?-1:0})},getPlayerName:function(t){return this.players.find(function(e){return e.id===t}).name},calculateStatistic:function(){var t=this;this.games.forEach(function(e){var r=[];e.players.forEach(function(e){r.push(t.getPlayerStatisticById(e))});for(var a=0;a<10;a++){var n=r[a];n.games++,n.box[a]++,t.playerWinGame(e,a)&&(n.wins++,n.boxWins[a]++),t.playerIsSherif(e,a)&&n.sherif++,t.playerIsSherifAndWin(e,a)&&n.sherifWins++,t.playerIsCitizen(e,a)&&n.citizen++,t.playerIsCitizenAndWin(e,a)&&n.citizenWins++,t.playerIsDon(e,a)&&n.don++,t.playerIsDonAndWin(e,a)&&n.donWins++,t.playerIsMaf(e,a)&&n.maf++,t.playerIsMafAndWin(e,a)&&n.mafWins++;for(var s=0;s<10;s++)if(a!==s){var l=t.getStatisticWithOtherPlayerById(n,e.players[s]);l.gamesTogether++,t.playerIsRed(e,a)&&t.playerIsRed(e,s)&&(l.bothRed++,e.cityWin&&l.bothRedWins++),t.playerIsBlack(e,a)&&t.playerIsBlack(e,s)&&(l.bothBlack++,e.cityWin||l.bothBlackWins++),t.playerIsRed(e,a)&&t.playerIsBlack(e,s)&&(l.playerRed++,e.cityWin&&l.playerRedWins++),t.playerIsBlack(e,a)&&t.playerIsRed(e,s)&&(l.playerBlack++,e.cityWin||l.playerBlackWins++)}}}),this.players.forEach(function(e){var r=t.getPlayerStatisticById(e.id);r.sherifWinPercent=t.calculatePercent(r.sherifWins,r.sherif),r.citizenWinPercent=t.calculatePercent(r.citizenWins,r.citizen),r.donWinPercent=t.calculatePercent(r.donWins,r.don),r.mafWinPercent=t.calculatePercent(r.mafWins,r.maf),r.withOtherPlayers=t.calculateStatisticWithOtherPlayers(r),t.playerStatisticsForDisplay.push(r)})},calculateStatisticWithOtherPlayers:function(t){var e=[],r=this;return this.players.forEach(function(a){if(a.id!=t.id){var n=t.withOtherPlayers[a.id];n&&(n.bothRedWinPercent=r.calculatePercent(n.bothRedWins,n.bothRed),n.bothBlackWinPercent=r.calculatePercent(n.bothBlackWins,n.bothBlack),n.playerRedWinPercent=r.calculatePercent(n.playerRedWins,n.playerRed),n.playerBlackWinPercent=r.calculatePercent(n.playerBlackWins,n.playerBlack),e.push(n))}}),e},getPlayerStatisticById:function(t){var e=this.playerStatistics[t];return e||(e={id:t,name:this.getPlayerName(t),games:0,wins:0,sherif:0,sherifWins:0,sherifWinPercent:0,citizen:0,citizenWins:0,citizenWinPercent:0,don:0,donWins:0,donWinPercent:0,maf:0,mafWins:0,mafWinPercent:0,box:Array(10).fill(0),boxWins:Array(10).fill(0),withOtherPlayers:{}},this.playerStatistics[t]=e),e},getStatisticWithOtherPlayerById:function(t,e){var r=t.withOtherPlayers[e];return r||(r={id:e,name:this.getPlayerName(e),gamesTogether:0,bothRed:0,bothRedWins:0,bothRedWinPercent:0,bothBlack:0,bothBlackWins:0,bothBlackWinPercent:0,playerRed:0,playerRedWins:0,playerRedWinPercent:0,playerBlack:0,playerBlackWins:0,playerBlackWinPercent:0},t.withOtherPlayers[e]=r),r},playerWinGame:function(t,e){return t.don==e||t.maf1==e||t.maf2==e?!t.cityWin:t.cityWin},playerIsSherif:function(t,e){return t.sherif==e},playerIsSherifAndWin:function(t,e){return t.cityWin&&this.playerIsSherif(t,e)},playerIsCitizen:function(t,e){return!(t.don==e||t.maf1==e||t.maf2==e||t.sherif==e)},playerIsCitizenAndWin:function(t,e){return t.cityWin&&this.playerIsCitizen(t,e)},playerIsDon:function(t,e){return t.don==e},playerIsDonAndWin:function(t,e){return!t.cityWin&&this.playerIsDon(t,e)},playerIsMaf:function(t,e){return t.maf1==e||t.maf2==e},playerIsMafAndWin:function(t,e){return!t.cityWin&&this.playerIsMaf(t,e)},playerIsBlack:function(t,e){return t.don==e||t.maf1==e||t.maf2==e},playerIsRed:function(t,e){return!this.playerIsBlack(t,e)},calculatePercent:function(t,e){return 0==e?0:Math.round(1e3*t/e)/10}}},R=B,w=(r("d823"),Object(m["a"])(R,l,i,!1,null,null,null)),D=w.exports,z={name:"app",components:{Statistics:D}},F=z,A=(r("034f"),Object(m["a"])(F,n,s,!1,null,null,null)),j=A.exports,C=r("43f9"),M=r.n(C);r("51de"),r("e094");a["default"].use(M.a),a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(j)}}).$mount("#app")},"64a9":function(t,e,r){},a335:function(t,e,r){"use strict";var a=r("b2b4"),n=r.n(a);n.a},b2b4:function(t,e,r){},bda8:function(t,e,r){},c552:function(t,e,r){},d823:function(t,e,r){"use strict";var a=r("2dd6"),n=r.n(a);n.a}});
//# sourceMappingURL=app.f5f99fcd.js.map